!function(){var undefined=void 0,defaultConfig={targetFrame:undefined,exportInstaller:!1,useNative:!0,useInnerText:!0},config;if(window.jsxpath)config=window.jsxpath;else{var scriptElms=document.getElementsByTagName("script"),scriptElm=scriptElms[scriptElms.length-1],scriptSrc=scriptElm.src;config={};var scriptSrcMatchResult=scriptSrc.match(/\?(.*)$/);if(scriptSrcMatchResult)for(var configStrings=scriptSrcMatchResult[1].split("&"),i=0,l=configStrings.length;l>i;i++){var configString=configStrings[i],configStringSplited=configString.split("="),configName=configStringSplited[0],configValue=configStringSplited[1];configValue==undefined||("false"==configValue||/^-?\d+$/.test(configValue))&&(configValue=eval(configValue)),config[configName]=configValue}}for(var n in defaultConfig)n in config||(config[n]=defaultConfig[n]);if(config.hasNative=!!(document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("XPath",null)),!config.hasNative||!config.useNative||config.exportInstaller){var BinaryExpr,FilterExpr,FunctionCall,Literal,NameTest,NodeSet,NodeType,NodeUtil,Number,PathExpr,Step,UnaryExpr,UnionExpr,VariableReference,uai=new function(){var e=navigator.userAgent;if(RegExp==undefined)e.indexOf("Opera")>=0?this.opera=!0:e.indexOf("Netscape")>=0?this.netscape=!0:0==e.indexOf("Mozilla/")?this.mozilla=!0:this.unknown=!0,e.indexOf("Gecko/")>=0&&(this.gecko=!0),e.indexOf("Win")>=0?this.windows=!0:e.indexOf("Mac")>=0?this.mac=!0:e.indexOf("Linux")>=0?this.linux=!0:e.indexOf("BSD")>=0?this.bsd=!0:e.indexOf("SunOS")>=0&&(this.sunos=!0);else if(/AppleWebKit\/(\d+(?:\.\d+)*)/.test(e)?(this.applewebkit=RegExp.$1,4==RegExp.$1.charAt(0)?this.applewebkit2=!0:this.applewebkit3=!0):"object"==typeof Components&&(/Gecko\/(\d{8})/.test(e)||"Gecko"==navigator.product&&/^(\d{8})$/.test(navigator.productSub))&&(this.gecko=RegExp.$1),"object"==typeof opera&&"function"==typeof opera.version?(this.opera=opera.version(),this["opera"+this.opera[0]+this.opera[2]]=!0):"object"==typeof opera&&/Opera[\/ ](\d+\.\d+)/.test(e)?this.opera=RegExp.$1:this.ie||(/Safari\/(\d+(?:\.\d+)*)/.test(e)?this.safari=RegExp.$1:/NetFront\/(\d+(?:\.\d+)*)/.test(e)?this.netfront=RegExp.$1:/Konqueror\/(\d+(?:\.\d+)*)/.test(e)?this.konqueror=RegExp.$1:e.indexOf("(compatible;")<0&&/^Mozilla\/(\d+\.\d+)/.test(e)?(this.mozilla=RegExp.$1,/\([^(]*rv:(\d+(?:\.\d+)*).*?\)/.test(e)&&(this.mozillarv=RegExp.$1),/Firefox\/(\d+(?:\.\d+)*)/.test(e)?this.firefox=RegExp.$1:/Netscape\d?\/(\d+(?:\.\d+)*)/.test(e)&&(this.netscape=RegExp.$1)):this.unknown=!0),e.indexOf("Win 9x 4.90")>=0)this.windows="ME";else if(/Win(?:dows)? ?(NT ?(\d+\.\d+)?|\d+|ME|Vista|XP)/.test(e))if(this.windows=RegExp.$1,RegExp.$2)this.winnt=RegExp.$2;else switch(RegExp.$1){case"2000":this.winnt="5.0";break;case"XP":this.winnt="5.1";break;case"Vista":this.winnt="6.0"}else e.indexOf("Mac")>=0?this.mac=!0:e.indexOf("Linux")>=0?this.linux=!0:/(\w*BSD)/.test(e)?this.bsd=RegExp.$1:e.indexOf("SunOS")>=0&&(this.sunos=!0)},Lexer=function(e){for(var t=Lexer.prototype,n=e.match(t.regs.token),r=0,i=n.length;i>r;r++)t.regs.strip.test(n[r])&&n.splice(r,1);for(var o in t)n[o]=t[o];return n.index=0,n};Lexer.prototype.regs={token:/\$?(?:(?![0-9-])[\w-]+:)?(?![0-9-])[\w-]+|\/\/|\.\.|::|\d+(?:\.\d*)?|\.\d+|"[^"]*"|'[^']*'|[!<>]=|(?![0-9-])[\w-]+:\*|\s+|./g,strip:/^\s/},Lexer.prototype.peek=function(e){return this[this.index+(e||0)]},Lexer.prototype.next=function(){return this[this.index++]},Lexer.prototype.back=function(){this.index--},Lexer.prototype.empty=function(){return this.length<=this.index};var Ctx=function(e,t,n){this.node=e,this.position=t||1,this.last=n||1},BaseExpr=function(){};BaseExpr.prototype.number=function(e){var t=this.evaluate(e);return t.isNodeSet?t.number():+t},BaseExpr.prototype.string=function(e){var t=this.evaluate(e);return t.isNodeSet?t.string():""+t},BaseExpr.prototype.bool=function(e){var t=this.evaluate(e);return t.isNodeSet?t.bool():!!t};var BaseExprHasPredicates=function(){};BaseExprHasPredicates.parsePredicates=function(e,t){for(;"["==e.peek();){if(e.next(),e.empty())throw Error("missing predicate expr");var n=BinaryExpr.parse(e);if(t.predicate(n),e.empty())throw Error("unclosed predicate expr");if("]"!=e.next())throw e.back(),Error("bad token: "+e.next())}},BaseExprHasPredicates.prototyps=new BaseExpr,BaseExprHasPredicates.prototype.evaluatePredicates=function(e,t){var n,r,i,e,o,s;s=this.reverse,n=this.predicates,e.sort();for(var a=t||0,l=n.length;l>a;a++){r=n[a];for(var u=[],i=e.list(),p=0,h=i.length;h>p;p++){switch(o=s?h-p:p+1,exrs=r.evaluate(new Ctx(i[p],o,h)),typeof exrs){case"number":exrs=o==exrs;break;case"string":exrs=!!exrs;break;case"object":exrs=exrs.bool()}exrs||u.push(p)}for(var p=u.length-1,h=0;p>=h;p--)e.del(u[p])}return e},!window.BinaryExpr&&window.defaultConfig&&(window.BinaryExpr=null),BinaryExpr=function(e,t,n,r){this.op=e,this.left=t,this.right=n,this.datatype=BinaryExpr.ops[e][2],this.needContextPosition=t.needContextPosition||n.needContextPosition,this.needContextNode=t.needContextNode||n.needContextNode,"="==this.op&&(n.needContextNode||n.needContextPosition||"nodeset"==n.datatype||"void"==n.datatype||!t.quickAttr?t.needContextNode||t.needContextPosition||"nodeset"==t.datatype||"void"==t.datatype||!n.quickAttr||(this.quickAttr=!0,this.attrName=n.attrName,this.attrValueExpr=t):(this.quickAttr=!0,this.attrName=t.attrName,this.attrValueExpr=n))},BinaryExpr.compare=function(e,t,n,r,i){var o,s,a,l,u,p;if(n=n.evaluate(i),r=r.evaluate(i),n.isNodeSet&&r.isNodeSet){s=n.list(),a=r.list();for(var h=0,f=s.length;f>h;h++)for(var c=0,d=a.length;d>c;c++)if(t(NodeUtil.to("string",s[h]),NodeUtil.to("string",a[c])))return!0;return!1}if(n.isNodeSet||r.isNodeSet){n.isNodeSet?(u=n,p=r):(u=r,p=n),l=u.list(),o=typeof p;for(var h=0,g=l.length;g>h;h++)if(t(NodeUtil.to(o,l[h]),p))return!0;return!1}return"="==e||"!="==e?"boolean"==typeof n||"boolean"==typeof r?t(!!n,!!r):"number"==typeof n||"number"==typeof r?t(+n,+r):t(n,r):t(+n,+r)},BinaryExpr.ops={div:[6,function(e,t,n){return e.number(n)/t.number(n)},"number"],mod:[6,function(e,t,n){return e.number(n)%t.number(n)},"number"],"*":[6,function(e,t,n){return e.number(n)*t.number(n)},"number"],"+":[5,function(e,t,n){return e.number(n)+t.number(n)},"number"],"-":[5,function(e,t,n){return e.number(n)-t.number(n)},"number"],"<":[4,function(e,t,n){return BinaryExpr.compare("<",function(e,t){return t>e},e,t,n)},"boolean"],">":[4,function(e,t,n){return BinaryExpr.compare(">",function(e,t){return e>t},e,t,n)},"boolean"],"<=":[4,function(e,t,n){return BinaryExpr.compare("<=",function(e,t){return t>=e},e,t,n)},"boolean"],">=":[4,function(e,t,n){return BinaryExpr.compare(">=",function(e,t){return e>=t},e,t,n)},"boolean"],"=":[3,function(e,t,n){return BinaryExpr.compare("=",function(e,t){return e==t},e,t,n)},"boolean"],"!=":[3,function(e,t,n){return BinaryExpr.compare("!=",function(e,t){return e!=t},e,t,n)},"boolean"],and:[2,function(e,t,n){return e.bool(n)&&t.bool(n)},"boolean"],or:[1,function(e,t,n){return e.bool(n)||t.bool(n)},"boolean"]},BinaryExpr.parse=function(e){var t,n,r,i,o=[];for(e.index;;){if(e.empty())throw Error("missing right expression");if(i=UnaryExpr.parse(e),t=e.next(),!t)break;if(r=this.ops[t],n=r&&r[0],!n){e.back();break}for(;o.length&&n<=this.ops[o[o.length-1]][0];)i=new BinaryExpr(o.pop(),o.pop(),i);o.push(i,t)}for(;o.length;)i=new BinaryExpr(o.pop(),o.pop(),i);return i},BinaryExpr.prototype=new BaseExpr,BinaryExpr.prototype.evaluate=function(e){return BinaryExpr.ops[this.op][1](this.left,this.right,e)},BinaryExpr.prototype.show=function(e){e=e||"";var t="";return t+=e+"binary: "+this.op+"\n",e+="    ",t+=this.left.show(e),t+=this.right.show(e)},!window.UnaryExpr&&window.defaultConfig&&(window.UnaryExpr=null),UnaryExpr=function(e,t){this.op=e,this.expr=t,this.needContextPosition=t.needContextPosition,this.needContextNode=t.needContextNode},UnaryExpr.ops={"-":1},UnaryExpr.parse=function(e){return this.ops[e.peek()]?new UnaryExpr(e.next(),UnaryExpr.parse(e)):UnionExpr.parse(e)},UnaryExpr.prototype=new BaseExpr,UnaryExpr.prototype.datatype="number",UnaryExpr.prototype.evaluate=function(e){return-this.expr.number(e)},UnaryExpr.prototype.show=function(e){e=e||"";var t="";return t+=e+"unary: "+this.op+"\n",e+="    ",t+=this.expr.show(e)},!window.UnionExpr&&window.defaultConfig&&(window.UnionExpr=null),UnionExpr=function(){this.paths=[]},UnionExpr.ops={"|":1},UnionExpr.parse=function(e){var t,n;if(n=PathExpr.parse(e),!this.ops[e.peek()])return n;for(t=new UnionExpr,t.path(n);;){if(!this.ops[e.next()])break;if(e.empty())throw Error("missing next union location path");t.path(PathExpr.parse(e))}return e.back(),t},UnionExpr.prototype=new BaseExpr,UnionExpr.prototype.datatype="nodeset",UnionExpr.prototype.evaluate=function(e){for(var t=this.paths,n=new NodeSet,r=0,i=t.length;i>r;r++){var o=t[r].evaluate(e);if(!o.isNodeSet)throw Error("PathExpr must be nodeset");n.merge(o)}return n},UnionExpr.prototype.path=function(e){this.paths.push(e),e.needContextPosition&&(this.needContextPosition=!0),e.needContextNode&&(this.needContextNode=!0)},UnionExpr.prototype.show=function(e){e=e||"";var t="";t+=e+"union:\n",e+="    ";for(var n=0;n<this.paths.length;n++)t+=this.paths[n].show(e);return t},!window.PathExpr&&window.defaultConfig&&(window.PathExpr=null),PathExpr=function(e){this.filter=e,this.steps=[],this.datatype=e.datatype,this.needContextPosition=e.needContextPosition,this.needContextNode=e.needContextNode},PathExpr.ops={"//":1,"/":1},PathExpr.parse=function(e){var t,n,r,i;if(this.ops[e.peek()]){if(t=e.next(),i=e.peek(),"/"==t&&(e.empty()||"."!=i&&".."!=i&&"@"!=i&&"*"!=i&&!/(?![0-9])[\w]/.test(i)))return FilterExpr.root();if(r=new PathExpr(FilterExpr.root()),e.empty())throw Error("missing next location step");n=Step.parse(e),r.step(t,n)}else if(n=FilterExpr.parse(e)){if(!this.ops[e.peek()])return n;r=new PathExpr(n)}else n=Step.parse(e),r=new PathExpr(FilterExpr.context()),r.step("/",n);for(;;){if(!this.ops[e.peek()])break;if(t=e.next(),e.empty())throw Error("missing next location step");r.step(t,Step.parse(e))}return r},PathExpr.prototype=new BaseExpr,PathExpr.prototype.evaluate=function(e){var t=this.filter.evaluate(e);if(!t.isNodeSet)throw Exception("Filter nodeset must be nodeset type");for(var n=this.steps,r=0,i=n.length;i>r&&t.length;r++){var o=n[r][1],s=o.reverse,a=t.iterator(s),l=t;t=null;var u,p;if(o.needContextPosition||"following"!=o.axis)if(o.needContextPosition||"preceding"!=o.axis){u=a();var h=0;for(t=o.evaluate(new Ctx(u),!1,l,h);u=a();)h++,t.merge(o.evaluate(new Ctx(u),!1,l,h))}else u=a(),t=o.evaluate(new Ctx(u));else{for(u=a();p=a();u=p)if(uai.applewebkit2){var f=!1,c=p;do if(c==u){f=!0;break}while(c=c.parentNode);if(!f)break}else try{if(!u.contains(p))break}catch(d){if(!(8&p.compareDocumentPosition(u)))break}t=o.evaluate(new Ctx(u))}}return t},PathExpr.prototype.step=function(e,t){if(t.op=e,this.steps.push([e,t]),this.quickAttr=!1,1==this.steps.length&&"/"==e&&"attribute"==t.axis){var n=t.test;n.notOnlyElement||"*"==n.name||(this.quickAttr=!0,this.attrName=n.name)}},PathExpr.prototype.show=function(e){e=e||"";var t="";if(t+=e+"path:\n",e+="    ",t+=e+"filter:\n",t+=this.filter.show(e+"    "),this.steps.length){t+=e+"steps:\n",e+="    ";for(var n=0;n<this.steps.length;n++){var r=this.steps[n];t+=e+"operator: "+r[0]+"\n",t+=r[1].show(e)}}return t},!window.FilterExpr&&window.defaultConfig&&(window.FilterExpr=null),FilterExpr=function(e){this.primary=e,this.predicates=[],this.datatype=e.datatype,this.needContextPosition=e.needContextPosition,this.needContextNode=e.needContextNode},FilterExpr.parse=function(e){var t,n,r,i;switch(r=e.peek(),i=r.charAt(0)){case"$":t=VariableReference.parse(e);break;case"(":if(e.next(),t=BinaryExpr.parse(e),e.empty())throw Error('unclosed "("');if(")"!=e.next())throw e.back(),Error("bad token: "+e.next());break;case'"':case"'":t=Literal.parse(e);break;default:if(isNaN(+r)){if(NodeType.types[r])return null;if(!/(?![0-9])[\w]/.test(i)||"("!=e.peek(1))return null;t=FunctionCall.parse(e)}else t=Number.parse(e)}return"["!=e.peek()?t:(n=new FilterExpr(t),BaseExprHasPredicates.parsePredicates(e,n),n)},FilterExpr.root=function(){return new FunctionCall("root-node")},FilterExpr.context=function(){return new FunctionCall("context-node")},FilterExpr.prototype=new BaseExprHasPredicates,FilterExpr.prototype.evaluate=function(e){var t=this.primary.evaluate(e);if(!t.isNodeSet){if(this.predicates.length)throw Error("Primary result must be nodeset type if filter have predicate expression");return t}return this.evaluatePredicates(t)},FilterExpr.prototype.predicate=function(e){this.predicates.push(e)},FilterExpr.prototype.show=function(e){e=e||"";var t="";if(t+=e+"filter: \n",e+="    ",t+=this.primary.show(e),this.predicates.length){t+=e+"predicates: \n",e+="    ";for(var n=0;n<this.predicates.length;n++)t+=this.predicates[n].show(e)}return t},!window.NodeUtil&&window.defaultConfig&&(window.NodeUtil=null),NodeUtil={to:function(e,t){var n,r=t.nodeType;if(1==r&&config.useInnerText&&!uai.applewebkit2&&(n=t.textContent,n=n==undefined||null==n?t.innerText:n,n=n==undefined||null==n?"":n),"string"!=typeof n)if(9==r||1==r)for(t=9==r?t.documentElement:t.firstChild,n="",stack=[],i=0;t;){do 1!=t.nodeType&&(n+=t.nodeValue),stack[i++]=t;while(t=t.firstChild);for(;i&&!(t=stack[--i].nextSibling););}else n=t.nodeValue;switch(e){case"number":return+n;case"boolean":return!!n;default:return n}},attrPropMap:{name:"name","class":"className",dir:"dir",id:"id",name:"name",title:"title"},attrMatch:function(e,t,n){return!!(!t||null==n&&e.hasAttribute&&e.hasAttribute(t)||null!=n&&e.getAttribute&&e.getAttribute(t)==n)},getDescendantNodes:function(e,t,n,r,i,o,s){if(o&&o.delDescendant(t,s),i&&"id"==r&&t.getElementById)t=t.getElementById(i),t&&e.match(t)&&n.push(t);else if(i&&"name"==r&&t.getElementsByName)for(var a=t.getElementsByName(i),l=0,u=a.length;u>l;l++)t=a[l],(uai.opera?t.name==i&&e.match(t):e.match(t))&&n.push(t);else if(i&&"class"==r&&t.getElementsByClassName)for(var a=t.getElementsByClassName(i),l=0,u=a.length;u>l;l++)t=a[l],t.className==i&&e.match(t)&&n.push(t);else if(e.notOnlyElement)!function(t){for(var o=arguments.callee,s=t.firstChild;s;s=s.nextSibling)NodeUtil.attrMatch(s,r,i)&&e.match(s.nodeType)&&n.push(s),o(s)}(t);else{var p=e.name;if(t.getElementsByTagName){var a=t.getElementsByTagName(p);if(a)for(var l=0;t=a[l++];)NodeUtil.attrMatch(t,r,i)&&n.push(t)}}return n},getChildNodes:function(e,t,n,r,i){for(var t=t.firstChild;t;t=t.nextSibling)NodeUtil.attrMatch(t,r,i)&&e.match(t)&&n.push(t);return n}},!window.Step&&window.defaultConfig&&(window.Step=null),Step=function(e,t){this.axis=e,this.reverse=Step.axises[e][0],this.func=Step.axises[e][1],this.test=t,this.predicates=[],this._quickAttr=Step.axises[e][2]},Step.axises={ancestor:[!0,function(e,t,n,r,i,o,s){for(;t=t.parentNode;)o&&1==t.nodeType&&o.reserveDelByNode(t,s,!0),e.match(t)&&n.unshift(t);return n}],"ancestor-or-self":[!0,function(e,t,n,r,i,o,s){do o&&1==t.nodeType&&o.reserveDelByNode(t,s,!0),e.match(t)&&n.unshift(t);while(t=t.parentNode);return n}],attribute:[!1,function(e,t,n){var r=t.attributes;if(r)if(e.notOnlyElement&&0==e.type||"*"==e.name)for(var i,o=0;i=r[o];o++)n.push(i);else{var i=r.getNamedItem(e.name);i&&n.push(i)}return n}],child:[!1,NodeUtil.getChildNodes,!0],descendant:[!1,NodeUtil.getDescendantNodes,!0],"descendant-or-self":[!1,function(e,t,n,r,i,o,s){return NodeUtil.attrMatch(t,r,i)&&e.match(t)&&n.push(t),NodeUtil.getDescendantNodes(e,t,n,r,i,o,s)},!0],following:[!1,function(e,t,n,r,i){do for(var o=t;o=o.nextSibling;)NodeUtil.attrMatch(o,r,i)&&e.match(o)&&n.push(o),n=NodeUtil.getDescendantNodes(e,o,n,r,i);while(t=t.parentNode);return n},!0],"following-sibling":[!1,function(e,t,n,r,i,o,s){for(;t=t.nextSibling;)o&&1==t.nodeType&&o.reserveDelByNode(t,s),e.match(t)&&n.push(t);return n}],namespace:[!1,function(e,t,n){return n}],parent:[!1,function(e,t,n){if(9==t.nodeType)return n;if(2==t.nodeType)return n.push(t.ownerElement),n;var t=t.parentNode;return e.match(t)&&n.push(t),n}],preceding:[!0,function(e,t,n,r,i){var o=[];do o.unshift(t);while(t=t.parentNode);for(var s=1,a=o.length;a>s;s++){var l=[];for(t=o[s];t=t.previousSibling;)l.unshift(t);for(var u=0,p=l.length;p>u;u++)t=l[u],NodeUtil.attrMatch(t,r,i)&&e.match(t)&&n.push(t),n=NodeUtil.getDescendantNodes(e,t,n,r,i)}return n},!0],"preceding-sibling":[!0,function(e,t,n,r,i,o,s){for(;t=t.previousSibling;)o&&1==t.nodeType&&o.reserveDelByNode(t,s,!0),e.match(t)&&n.unshift(t);return n}],self:[!1,function(e,t,n){return e.match(t)&&n.push(t),n}]},Step.parse=function(e){var t,n,r,i;if("."==e.peek())r=this.self(),e.next();else if(".."==e.peek())r=this.parent(),e.next();else{if("@"==e.peek()){if(t="attribute",e.next(),e.empty())throw Error("missing attribute name")}else if("::"==e.peek(1)){if(!/(?![0-9])[\w]/.test(e.peek().charAt(0)))throw Error("bad token: "+e.next());if(t=e.next(),e.next(),!this.axises[t])throw Error("invalid axis: "+t);if(e.empty())throw Error("missing node name")}else t="child";if(i=e.peek(),/(?![0-9])[\w]/.test(i.charAt(0)))if("("==e.peek(1)){if(!NodeType.types[i])throw Error("invalid node type: "+i);n=NodeType.parse(e)}else n=NameTest.parse(e);else{if("*"!=i)throw Error("bad token: "+e.next());n=NameTest.parse(e)}r=new Step(t,n)}return BaseExprHasPredicates.parsePredicates(e,r),r},Step.self=function(){return new Step("self",new NodeType("node"))},Step.parent=function(){return new Step("parent",new NodeType("node"))},Step.prototype=new BaseExprHasPredicates,Step.prototype.evaluate=function(e,t,n,r){var i=e.node;if(t||"//"!=this.op){if(this.needContextPosition&&(n=null,r=null),this.quickAttr){var o=this.attrValueExpr?this.attrValueExpr.string(e):null,s=this.func(this.test,i,new NodeSet,this.attrName,o,n,r);s=this.evaluatePredicates(s,1)}else{var s=this.func(this.test,i,new NodeSet,null,null,n,r);s=this.evaluatePredicates(s)}n&&n.doDel()}else if(this.needContextPosition||"child"!=this.axis){var a=new Step("descendant-or-self",new NodeType("node")),l=a.evaluate(e,!1,n,r).list(),s=null;a.op="/";for(var u=0,p=l.length;p>u;u++)s?s.merge(this.evaluate(new Ctx(l[u]),!0)):s=this.evaluate(new Ctx(l[u]),!0);s=s||new NodeSet}else if(this.quickAttr){var o=this.attrValueExpr?this.attrValueExpr.string(e):null,s=NodeUtil.getDescendantNodes(this.test,i,new NodeSet,this.attrName,o,n,r);s=this.evaluatePredicates(s,1)}else{var s=NodeUtil.getDescendantNodes(this.test,i,new NodeSet,null,null,n,r);s=this.evaluatePredicates(s)}return s},Step.prototype.predicate=function(e){if(this.predicates.push(e),(e.needContextPosition||"number"==e.datatype||"void"==e.datatype)&&(this.needContextPosition=!0),this._quickAttr&&1==this.predicates.length&&e.quickAttr){var t=e.attrName;this.attrName=t,this.attrValueExpr=e.attrValueExpr,this.quickAttr=!0}},Step.prototype.show=function(e){e=e||"";var t="";if(t+=e+"step: \n",e+="    ",this.axis&&(t+=e+"axis: "+this.axis+"\n"),t+=this.test.show(e),this.predicates.length){t+=e+"predicates: \n",e+="    ";for(var n=0;n<this.predicates.length;n++)t+=this.predicates[n].show(e)}return t},!window.NodeType&&window.defaultConfig&&(window.NodeType=null),NodeType=function(e,t){switch(this.name=e,this.literal=t,e){case"comment":this.type=8;break;case"text":this.type=3;break;case"processing-instruction":this.type=7;break;case"node":this.type=0}},NodeType.types={comment:1,text:1,"processing-instruction":1,node:1},NodeType.parse=function(e){var t,n,r;if(t=e.next(),e.next(),e.empty())throw Error("bad nodetype");if(r=e.peek().charAt(0),'"'!=r&&"'"!=r||(n=Literal.parse(e)),e.empty())throw Error("bad nodetype");if(")"!=e.next())throw e.back(),Error("bad token "+e.next());return new NodeType(t,n)},NodeType.prototype=new BaseExpr,NodeType.prototype.notOnlyElement=!0,NodeType.prototype.match=function(e){return!this.type||this.type==e.nodeType},NodeType.prototype.show=function(e){e=e||"";var t="";return t+=e+"nodetype: "+this.type+"\n",this.literal&&(e+="    ",t+=this.literal.show(e)),t},!window.NameTest&&window.defaultConfig&&(window.NameTest=null),NameTest=function(e){this.name=e.toLowerCase()},NameTest.parse=function(e){return new NameTest("*"!=e.peek()&&":"==e.peek(1)&&"*"==e.peek(2)?e.next()+e.next()+e.next():e.next())},NameTest.prototype=new BaseExpr,NameTest.prototype.match=function(e){var t=e.nodeType;return!(1!=t&&2!=t||"*"!=this.name&&this.name!=e.nodeName.toLowerCase())},NameTest.prototype.show=function(e){e=e||"";var t="";return t+=e+"nametest: "+this.name+"\n"},!window.VariableReference&&window.defaultConfig&&(window.VariableReference=null),VariableReference=function(e){this.name=e.substring(1)},VariableReference.parse=function(e){var t=e.next();if(t.length<2)throw Error("unnamed variable reference");return new VariableReference(t)},VariableReference.prototype=new BaseExpr,VariableReference.prototype.datatype="void",VariableReference.prototype.show=function(e){e=e||"";var t="";return t+=e+"variable: "+this.name+"\n"},!window.Literal&&window.defaultConfig&&(window.Literal=null),Literal=function(e){this.text=e.substring(1,e.length-1)},Literal.parse=function(e){var t=e.next();if(t.length<2)throw Error("unclosed literal string");return new Literal(t)},Literal.prototype=new BaseExpr,Literal.prototype.datatype="string",Literal.prototype.evaluate=function(e){return this.text},Literal.prototype.show=function(e){e=e||"";var t="";return t+=e+"literal: "+this.text+"\n"},!window.Number&&window.defaultConfig&&(window.Number=null),Number=function(e){this.digit=+e},Number.parse=function(e){return new Number(e.next())},Number.prototype=new BaseExpr,Number.prototype.datatype="number",Number.prototype.evaluate=function(e){return this.digit},Number.prototype.show=function(e){e=e||"";var t="";return t+=e+"number: "+this.digit+"\n"},!window.FunctionCall&&window.defaultConfig&&(window.FunctionCall=null),FunctionCall=function(e){var t=FunctionCall.funcs[e];if(!t)throw Error(e+" is not a function");this.name=e,this.func=t[0],this.args=[],this.datatype=t[1],t[2]&&(this.needContextPosition=!0),this.needContextNodeInfo=t[3],this.needContextNode=this.needContextNodeInfo[0]},FunctionCall.funcs={"context-node":[function(){if(0!=arguments.length)throw Error("Function context-node expects ()");var e;return e=new NodeSet,e.push(this.node),e},"nodeset",!1,[!0]],"root-node":[function(){if(0!=arguments.length)throw Error("Function root-node expects ()");var e,t;return e=new NodeSet,t=this.node,9==t.nodeType?e.push(t):e.push(t.ownerDocument),e},"nodeset",!1,[]],last:[function(){if(0!=arguments.length)throw Error("Function last expects ()");return this.last},"number",!0,[]],position:[function(){if(0!=arguments.length)throw Error("Function position expects ()");return this.position},"number",!0,[]],count:[function(e){if(1!=arguments.length||!(e=e.evaluate(this)).isNodeSet)throw Error("Function count expects (nodeset)");return e.length},"number",!1,[]],id:[function(e){var t,n,r,i,o,s,a;if(1!=arguments.length)throw Error("Function id expects (object)");for(s=this.node,a=9==s.nodeType?s:s.ownerDocument,e=e.string(this),t=e.split(/\s+/),n=new NodeSet,r=0,l=t.length;l>r;r++)if(i=t[r],o=a.getElementById(i),uai.opera&&o&&o.id!=i)for(var u=a.getElementsByName(i),p=0,h=u.length;h>p;p++)o=u[p],o.id==i&&n.push(o);else o&&n.push(o);return n.isSorted=!1,n},"nodeset",!1,[]],"local-name":[function(e){var t;switch(arguments.length){case 0:t=this.node;break;case 1:if((e=e.evaluate(this)).isNodeSet){t=e.first();break}default:throw Error("Function local-name expects (nodeset?)")}return""+t.nodeName.toLowerCase()},"string",!1,[!0,!1]],name:[function(e){return FunctionCall.funcs["local-name"][0].apply(this,arguments)},"string",!1,[!0,!1]],"namespace-uri":[function(e){return""},"string",!1,[!0,!1]],string:[function(e){switch(arguments.length){case 0:e=NodeUtil.to("string",this.node);break;case 1:e=e.string(this);break;default:throw Error("Function string expects (object?)")}return e},"string",!1,[!0,!1]],concat:[function(e,t){if(arguments.length<2)throw Error("Function concat expects (string, string[, ...])");for(var n="",r=0,i=arguments.length;i>r;r++)n+=arguments[r].string(this);return n},"string",!1,[]],"starts-with":[function(e,t){if(2!=arguments.length)throw Error("Function starts-with expects (string, string)");return e=e.string(this),t=t.string(this),0==e.indexOf(t)},"boolean",!1,[]],contains:[function(e,t){if(2!=arguments.length)throw Error("Function contains expects (string, string)");return e=e.string(this),t=t.string(this),-1!=e.indexOf(t)},"boolean",!1,[]],substring:[function(e,t,n){var r,i;switch(e=e.string(this),t=t.number(this),arguments.length){case 2:n=e.length-t+1;break;case 3:n=n.number(this);break;default:throw Error("Function substring expects (string, string)")}return t=Math.round(t),n=Math.round(n),r=t-1,i=t+n-1,i==1/0?e.substring(0>r?0:r):e.substring(0>r?0:r,i)},"string",!1,[]],"substring-before":[function(e,t){var n;if(2!=arguments.length)throw Error("Function substring-before expects (string, string)");return e=e.string(this),t=t.string(this),n=e.indexOf(t),-1==n?"":e.substring(0,n)},"string",!1,[]],"substring-after":[function(e,t){if(2!=arguments.length)throw Error("Function substring-after expects (string, string)");e=e.string(this),t=t.string(this);var n=e.indexOf(t);return-1==n?"":e.substring(n+t.length)},"string",!1,[]],"string-length":[function(e){switch(arguments.length){case 0:e=NodeUtil.to("string",this.node);break;case 1:e=e.string(this);break;default:throw Error("Function string-length expects (string?)")}return e.length},"number",!1,[!0,!1]],"normalize-space":[function(e){switch(arguments.length){case 0:e=NodeUtil.to("string",this.node);break;case 1:e=e.string(this);break;default:throw Error("Function normalize-space expects (string?)")}return e.replace(/\s+/g," ").replace(/^ /,"").replace(/ $/,"")},"string",!1,[!0,!1]],translate:[function(e,t,n){if(3!=arguments.length)throw Error("Function translate expects (string, string, string)");e=e.string(this),t=t.string(this),n=n.string(this);for(var r=[],i=0,o=t.length;o>i;i++){var s=t.charAt(i);r[s]||(r[s]=n.charAt(i)||"")}for(var a="",i=0,o=e.length;o>i;i++){var s=e.charAt(i),l=r[s];a+=l!=undefined?l:s}return a},"string",!1,[]],"boolean":[function(e){if(1!=arguments.length)throw Error("Function boolean expects (object)");return e.bool(this)},"boolean",!1,[]],not:[function(e){if(1!=arguments.length)throw Error("Function not expects (object)");return!e.bool(this)},"boolean",!1,[]],"true":[function(){if(0!=arguments.length)throw Error("Function true expects ()");return!0},"boolean",!1,[]],"false":[function(){if(0!=arguments.length)throw Error("Function false expects ()");return!1},"boolean",!1,[]],lang:[function(e){return!1},"boolean",!1,[]],number:[function(e){switch(arguments.length){case 0:e=NodeUtil.to("number",this.node);break;case 1:e=e.number(this);break;default:throw Error("Function number expects (object?)")}return e},"number",!1,[!0,!1]],sum:[function(e){var t,n,r,i;if(1!=arguments.length||!(e=e.evaluate(this)).isNodeSet)throw Error("Function sum expects (nodeset)");for(t=e.list(),n=0,r=0,i=t.length;i>r;r++)n+=NodeUtil.to("number",t[r]);return n},"number",!1,[]],floor:[function(e){if(1!=arguments.length)throw Error("Function floor expects (number)");return e=e.number(this),Math.floor(e)},"number",!1,[]],ceiling:[function(e){if(1!=arguments.length)throw Error("Function ceiling expects (number)");return e=e.number(this),Math.ceil(e)},"number",!1,[]],round:[function(e){if(1!=arguments.length)throw Error("Function round expects (number)");return e=e.number(this),Math.round(e)},"number",!1,[]]},FunctionCall.parse=function(e){var t,n=new FunctionCall(e.next());for(e.next();")"!=e.peek();){if(e.empty())throw Error("missing function argument list");if(t=BinaryExpr.parse(e),n.arg(t),","!=e.peek())break;e.next()}if(e.empty())throw Error("unclosed function argument list");if(")"!=e.next())throw e.back(),Error("bad token: "+e.next());return n},FunctionCall.prototype=new BaseExpr,FunctionCall.prototype.evaluate=function(e){return this.func.apply(e,this.args)},FunctionCall.prototype.arg=function(e){this.args.push(e),e.needContextPosition&&(this.needContextPosition=!0);var t=this.args;e.needContextNode&&(t.needContexNode=!0),this.needContextNode=t.needContextNode||this.needContextNodeInfo[t.length]},FunctionCall.prototype.show=function(e){e=e||"";var t="";if(t+=e+"function: "+this.name+"\n",e+="    ",this.args.length){t+=e+"arguments: \n",e+="    ";for(var n=0;n<this.args.length;n++)t+=this.args[n].show(e)}return t};var NodeID={uuid:1,get:function(e){return e.__jsxpath_id__||(e.__jsxpath_id__=this.uuid++)}};!window.NodeSet&&window.defaultConfig&&(window.NodeSet=null),NodeSet=function(){this.length=0,this.nodes=[],this.seen={},this.idIndexMap=null,this.reserveDels=[]},NodeSet.prototype.isNodeSet=!0,NodeSet.prototype.isSorted=!0,NodeSet.prototype.merge=function(e){if(this.isSorted=!1,e.only)return this.push(e.only);if(this.only){var t=this.only;delete this.only,this.push(t),this.length--}for(var n=e.nodes,r=0,i=n.length;i>r;r++)this._add(n[r])},NodeSet.prototype.sort=function(){if(!this.only&&!this.sortOff&&!this.isSorted){this.isSorted=!0,this.idIndexMap=null;var e=this.nodes;e.sort(function(e,t){if(e==t)return 0;if(e.compareDocumentPosition){var n=e.compareDocumentPosition(t);return 2&n?1:4&n?-1:0}for(var r=e,i=t,o=e,s=t,a=0,l=0;o=o.parentNode;)a++;for(;s=s.parentNode;)l++;if(a>l){for(;a--!=l;)r=r.parentNode;if(r==i)return 1}else if(l>a){for(;l--!=a;)i=i.parentNode;if(r==i)return-1}for(;(o=r.parentNode)!=(s=i.parentNode);)r=o,i=s;for(;r=r.nextSibling;)if(r==i)return-1;return 1})}},NodeSet.prototype.reserveDelByNodeID=function(e,t,n){var r,i=this.createIdIndexMap();if((r=i[e])&&(n&&this.length-t-1>r||!n&&r>t)){var o={value:r,order:String.fromCharCode(r),toString:function(){return this.order},valueOf:function(){return this.value}};this.reserveDels.push(o)}},NodeSet.prototype.reserveDelByNode=function(e,t,n){this.reserveDelByNodeID(NodeID.get(e),t,n)},NodeSet.prototype.doDel=function(){if(this.reserveDels.length){if(this.length<65536)var e=this.reserveDels.sort(function(e,t){return t-e});else var e=this.reserveDels.sort(function(e,t){return t-e});for(var t=0,n=e.length;n>t;t++)this.del(e[t]);this.reserveDels=[],this.idIndexMap=null}},NodeSet.prototype.createIdIndexMap=function(){if(this.idIndexMap)return this.idIndexMap;for(var e=this.idIndexMap={},t=this.nodes,n=0,r=t.length;r>n;n++){var i=t[n],o=NodeID.get(i);e[o]=n}return e},NodeSet.prototype.del=function(e){if(this.length--,this.only)delete this.only;else{var t=this.nodes.splice(e,1)[0];this._first==t&&(delete this._first,delete this._firstSourceIndex,delete this._firstSubIndex),delete this.seen[NodeID.get(t)]}},NodeSet.prototype.delDescendant=function(e,t){if(!this.only){var n=e.nodeType;if((1==n||9==n)&&!uai.applewebkit2){if(!e.contains)if(1==n){var r=e;e={contains:function(e){return 8&e.compareDocumentPosition(r)}}}else e={contains:function(){return!0}};for(var i=this.nodes,o=t+1;o<i.length;o++)e.contains(i[o])&&(this.del(o),o--)}}},NodeSet.prototype._add=function(e,t){var n=this.seen,r=NodeID.get(e);return n[r]?!0:(n[r]=!0,this.length++,void(t?this.nodes.unshift(e):this.nodes.push(e)))},NodeSet.prototype.unshift=function(e){if(!this.length)return this.length++,void(this.only=e);if(this.only){var t=this.only;delete this.only,this.unshift(t),this.length--}return this._add(e,!0)},NodeSet.prototype.push=function(e){if(!this.length)return this.length++,void(this.only=e);if(this.only){var t=this.only;delete this.only,this.push(t),this.length--}return this._add(e)},NodeSet.prototype.first=function(){return this.only?this.only:(this.nodes.length>1&&this.sort(),this.nodes[0])},NodeSet.prototype.list=function(){return this.only?[this.only]:(this.sort(),this.nodes)},NodeSet.prototype.string=function(){var e=this.only||this.first();return e?NodeUtil.to("string",e):""},NodeSet.prototype.bool=function(){return!(!this.length&&!this.only)},NodeSet.prototype.number=function(){return+this.string()},NodeSet.prototype.iterator=function(e){
this.sort();var t=this;if(e){var n=0;return function(){var e=t.length-n++-1;return t.only&&0==e?t.only:t.nodes[e]}}var n=0;return function(){return t.only&&0==n++?t.only:t.nodes[n++]}};var install=function(e){e=e||this;var t=e.document;e.undefined;e.XPathExpression=function(t){if(!t.length)throw e.Error("no expression");var n=this.lexer=Lexer(t);if(n.empty())throw e.Error("no expression");if(this.expr=BinaryExpr.parse(n),!n.empty())throw e.Error("bad token: "+n.next())},e.XPathExpression.prototype.evaluate=function(t,n){return new e.XPathResult(this.expr.evaluate(new Ctx(t)),n)},e.XPathResult=function(e,t){if(0==t)switch(typeof e){case"object":t++;case"boolean":t++;case"string":t++;case"number":t++}switch(this.resultType=t,t){case 1:return void(this.numberValue=e.isNodeSet?e.number():+e);case 2:return void(this.stringValue=e.isNodeSet?e.string():""+e);case 3:return void(this.booleanValue=e.isNodeSet?e.bool():!!e);case 4:case 5:case 6:case 7:this.nodes=e.list(),this.snapshotLength=e.length,this.index=0,this.invalidIteratorState=!1;break;case 8:case 9:return void(this.singleNodeValue=e.first())}},e.XPathResult.prototype.iterateNext=function(){return this.nodes[this.index++]},e.XPathResult.prototype.snapshotItem=function(e){return this.nodes[e]},e.XPathResult.ANY_TYPE=0,e.XPathResult.NUMBER_TYPE=1,e.XPathResult.STRING_TYPE=2,e.XPathResult.BOOLEAN_TYPE=3,e.XPathResult.UNORDERED_NODE_ITERATOR_TYPE=4,e.XPathResult.ORDERED_NODE_ITERATOR_TYPE=5,e.XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE=6,e.XPathResult.ORDERED_NODE_SNAPSHOT_TYPE=7,e.XPathResult.ANY_UNORDERED_NODE_TYPE=8,e.XPathResult.FIRST_ORDERED_NODE_TYPE=9,t.createExpression=function(t){return new e.XPathExpression(t,null)},t.evaluate=function(e,n,r,i){return t.createExpression(e,null).evaluate(n,i)}},win;if(config.targetFrame){var frame=document.getElementById(config.targetFrame);frame&&(win=frame.contentWindow)}config.exportInstaller&&(window.install=install),config.hasNative&&config.useNative||install(win||window)}}(),jQuery.cookie=function(e,t,n){if("undefined"!=typeof t){n=n||{},null===t&&(t="",n.expires=-1);var r="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var i;"number"==typeof n.expires?(i=new Date,i.setTime(i.getTime()+24*n.expires*60*60*1e3)):i=n.expires,r="; expires="+i.toUTCString()}var o=n.path?"; path="+n.path:"",s=n.domain?"; domain="+n.domain:"",a=n.secure?"; secure":"";return void(document.cookie=[e,"=",encodeURIComponent(t),r,o,s,a].join(""))}var l=null;if(document.cookie&&""!==document.cookie)for(var u=document.cookie.split(";"),p=0;p<u.length;p++){var h=jQuery.trim(u[p]);if(h.substring(0,e.length+1)==e+"="){l=decodeURIComponent(h.substring(e.length+1));break}}return l},function(e){var t=function(e,t){return e<<t|e>>>32-t},n=function(e,t){var n,r,i,o,s;return i=2147483648&e,o=2147483648&t,n=1073741824&e,r=1073741824&t,s=(1073741823&e)+(1073741823&t),n&r?2147483648^s^i^o:n|r?1073741824&s?3221225472^s^i^o:1073741824^s^i^o:s^i^o},r=function(e,t,n){return e&t|~e&n},i=function(e,t,n){return e&n|t&~n},o=function(e,t,n){return e^t^n},s=function(e,t,n){return t^(e|~n)},a=function(e,i,o,s,a,l,u){return e=n(e,n(n(r(i,o,s),a),u)),n(t(e,l),i)},l=function(e,r,o,s,a,l,u){return e=n(e,n(n(i(r,o,s),a),u)),n(t(e,l),r)},u=function(e,r,i,s,a,l,u){return e=n(e,n(n(o(r,i,s),a),u)),n(t(e,l),r)},p=function(e,r,i,o,a,l,u){return e=n(e,n(n(s(r,i,o),a),u)),n(t(e,l),r)},h=function(e){for(var t,n=e.length,r=n+8,i=(r-r%64)/64,o=16*(i+1),s=Array(o-1),a=0,l=0;n>l;)t=(l-l%4)/4,a=l%4*8,s[t]=s[t]|e.charCodeAt(l)<<a,l++;return t=(l-l%4)/4,a=l%4*8,s[t]=s[t]|128<<a,s[o-2]=n<<3,s[o-1]=n>>>29,s},f=function(e){var t,n,r="",i="";for(n=0;3>=n;n++)t=e>>>8*n&255,i="0"+t.toString(16),r+=i.substr(i.length-2,2);return r},c=function(e){e=e.replace(/\x0d\x0a/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t};e.extend({md5:function(e){var t,r,i,o,s,d,g,m,x,v=Array(),w=7,y=12,E=17,N=22,b=5,S=9,T=14,P=20,C=4,k=11,R=16,A=23,_=6,D=10,B=15,O=21;for(e=c(e),v=h(e),d=1732584193,g=4023233417,m=2562383102,x=271733878,t=0;t<v.length;t+=16)r=d,i=g,o=m,s=x,d=a(d,g,m,x,v[t+0],w,3614090360),x=a(x,d,g,m,v[t+1],y,3905402710),m=a(m,x,d,g,v[t+2],E,606105819),g=a(g,m,x,d,v[t+3],N,3250441966),d=a(d,g,m,x,v[t+4],w,4118548399),x=a(x,d,g,m,v[t+5],y,1200080426),m=a(m,x,d,g,v[t+6],E,2821735955),g=a(g,m,x,d,v[t+7],N,4249261313),d=a(d,g,m,x,v[t+8],w,1770035416),x=a(x,d,g,m,v[t+9],y,2336552879),m=a(m,x,d,g,v[t+10],E,4294925233),g=a(g,m,x,d,v[t+11],N,2304563134),d=a(d,g,m,x,v[t+12],w,1804603682),x=a(x,d,g,m,v[t+13],y,4254626195),m=a(m,x,d,g,v[t+14],E,2792965006),g=a(g,m,x,d,v[t+15],N,1236535329),d=l(d,g,m,x,v[t+1],b,4129170786),x=l(x,d,g,m,v[t+6],S,3225465664),m=l(m,x,d,g,v[t+11],T,643717713),g=l(g,m,x,d,v[t+0],P,3921069994),d=l(d,g,m,x,v[t+5],b,3593408605),x=l(x,d,g,m,v[t+10],S,38016083),m=l(m,x,d,g,v[t+15],T,3634488961),g=l(g,m,x,d,v[t+4],P,3889429448),d=l(d,g,m,x,v[t+9],b,568446438),x=l(x,d,g,m,v[t+14],S,3275163606),m=l(m,x,d,g,v[t+3],T,4107603335),g=l(g,m,x,d,v[t+8],P,1163531501),d=l(d,g,m,x,v[t+13],b,2850285829),x=l(x,d,g,m,v[t+2],S,4243563512),m=l(m,x,d,g,v[t+7],T,1735328473),g=l(g,m,x,d,v[t+12],P,2368359562),d=u(d,g,m,x,v[t+5],C,4294588738),x=u(x,d,g,m,v[t+8],k,2272392833),m=u(m,x,d,g,v[t+11],R,1839030562),g=u(g,m,x,d,v[t+14],A,4259657740),d=u(d,g,m,x,v[t+1],C,2763975236),x=u(x,d,g,m,v[t+4],k,1272893353),m=u(m,x,d,g,v[t+7],R,4139469664),g=u(g,m,x,d,v[t+10],A,3200236656),d=u(d,g,m,x,v[t+13],C,681279174),x=u(x,d,g,m,v[t+0],k,3936430074),m=u(m,x,d,g,v[t+3],R,3572445317),g=u(g,m,x,d,v[t+6],A,76029189),d=u(d,g,m,x,v[t+9],C,3654602809),x=u(x,d,g,m,v[t+12],k,3873151461),m=u(m,x,d,g,v[t+15],R,530742520),g=u(g,m,x,d,v[t+2],A,3299628645),d=p(d,g,m,x,v[t+0],_,4096336452),x=p(x,d,g,m,v[t+7],D,1126891415),m=p(m,x,d,g,v[t+14],B,2878612391),g=p(g,m,x,d,v[t+5],O,4237533241),d=p(d,g,m,x,v[t+12],_,1700485571),x=p(x,d,g,m,v[t+3],D,2399980690),m=p(m,x,d,g,v[t+10],B,4293915773),g=p(g,m,x,d,v[t+1],O,2240044497),d=p(d,g,m,x,v[t+8],_,1873313359),x=p(x,d,g,m,v[t+15],D,4264355552),m=p(m,x,d,g,v[t+6],B,2734768916),g=p(g,m,x,d,v[t+13],O,1309151649),d=p(d,g,m,x,v[t+4],_,4149444226),x=p(x,d,g,m,v[t+11],D,3174756917),m=p(m,x,d,g,v[t+2],B,718787259),g=p(g,m,x,d,v[t+9],O,3951481745),d=n(d,r),g=n(g,i),m=n(m,o),x=n(x,s);var F=f(d)+f(g)+f(m)+f(x);return F.toLowerCase()}})}(jQuery),vmf.log={levels:["NONE","CRITICAL","ERROR","WARNING","INFO","DEBUG"],level:0,initialize:function(){switch(this._create_log_functions(),window.location.hostname){case"portal-vmwperf.vmware.com":case"downloads-qa.vmware.com":vmf.log.level=0;break;case"newcastle.vmware.com":case"wwwa-dev-sso-1.vmware.com":vmf.log.level=0;break;case"serafina.vmware.com":vmf.log.level=5}},_create_log_functions:function(){for(var thisLevelsLength=this.levels.length,level=0;thisLevelsLength>level;level++)eval('var logLevelFunction = function(message) { if (typeof message != "undefined" && message !== null && message.length > 0) this._log('+level+", message); }"),this[this.levels[level].toLowerCase()]=logLevelFunction},_log:function(e,t){if("undefined"!=typeof e&&null!==e&&NaN!=e&&e>0&&e<this.levels.length&&e<=this.level){var n=this.levels[e]+": "+t;if("undefined"!=typeof console&&null!==console&&"undefined"!=typeof console.log&&null!==console.log)console.log(n);else{var r=document.getElementById("log");null===r&&(r=document.createElement("div"),r.setAttribute("id","log"),r.style.display="block",document.getElementsByTagName("body")[0].appendChild(r));var i=document.createElement("div");i.appendChild(document.createTextNode(n)),r.appendChild(i)}}}},vmf.log.initialize(),vmf.countProperties=function(e){if(null===e)return 0;if(void 0!==e.__count__)return e.__count__;var t=0;for(k in e)e.hasOwnProperty(k)&&t++;return t},vmf.sat=function($){return{title:"VMware Self Service Alert System",root:vmf.hostname+"/sat",fetchAlerts:function(options){if(vmf.sat.alerts=vmf.sat.template=null,void 0!==$.md5){var urlHash=$.md5(window.location.pathname.replace(/\index.html$/,""));vmf.log.info("SAT: MD5 hash of URL path: "+urlHash);var fqdm=window.location.hostname;"vmware.com"==fqdm&&(fqdm="www.vmware.com"),vmf.sat.preview=null!==$.cookie("sat");var alertPath="publish";vmf.sat.preview&&(alertPath="preview");var alertURL=vmf.sat.root+"/"+alertPath+"/"+fqdm+"/"+urlHash+".js";vmf.log.info("SAT: Request URL: "+alertURL),$.getScriptCache(alertURL,function(response){if(void 0==vmf.sat.alerts&&eval(response),"undefined"!=typeof vmf.sat.alerts&&null!==vmf.sat.alerts){var alert=vmf.sat.matchAlertQueryString(vmf.sat.alerts);null!==alert?(alert.elements=vmf.sat.findSelector(alert.selector),alert.elements.length>0?vmf.sat.fetchTemplate(alert):vmf.log.error("SAT: no elements found that match an alert selector.")):vmf.log.warning("SAT: no alert found that matches the query string.")}else vmf.log.warning("SAT: no alerts found for this url.")})}},loadAlertData:function(e){"undefined"!=typeof e&&null!==e&&(vmf.sat.alerts=e)},matchAlertQueryString:function(e){var t=null;if(e.sort(function(e,t){var n=vmf.countProperties(e["query-string"]),r=vmf.countProperties(t["query-string"]);return r>n?1:e==t?0:-1}),""===window.location.search)return t=e.pop(),vmf.countProperties(t["query-string"])>0?null:t;for(var n=e.length,r=0;n>r;r++)if(vmf.sat.matchQueryParams(e[r]["query-string"])){t=e[r];break}return t},matchQueryParams:function(e){"undefined"!=typeof JSON&&"undefined"!=typeof JSON.stringify&&vmf.log.info("SAT: query string: "+JSON.stringify(e));var t=!0,n=window.location.search.replace(/^\?/,"").replace("&amp;","&").replace(";","&").split("&");return $.each(e,function(e,r){vmf.log.debug("SAT: query parameter: "+e+"="+r),-1==$.inArray(e+"="+r,n)&&(t=!1)}),vmf.log.info("SAT: All query parameters matched? "+(t?"Yes":"No")),t},findSelector:function(e){vmf.log.info("SAT: selector: "+e);var t=new Array,n=document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);if(null!==n&&void 0!==n.resultType)switch(n.resultType){case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:case XPathResult.ORDERED_NODE_ITERATOR_TYPE:if(vmf.log.debug("SAT: xpath result is a node iterator."),n.invalidIteratorState)vmf.log.error("SAT: xpath result has invalid iterator state.");else{var r=n.iterateNext();null!==r?(t.push(r),vmf.log.info("SAT: new element pushed on elements array.")):vmf.log.error("SAT: xpath result returned null after iteration.")}break;case XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE:case XPathResult.ORDERED_NODE_SNAPSHOT_TYPE:if(vmf.log.debug("SAT: xpath result is a node snapshot."),n.snapshotLength)for(var i=0;i<n.snapshotLength;i++)t.push(n.snapshotItem(i)),vmf.log.info("SAT: new element pushed on elements array.");else vmf.log.error("SAT: selector could not be found.");break;case XPathResult.ANY_UNORDERED_NODE_TYPE:case XPathResult.FIRST_ORDERED_NODE_TYPE:vmf.log.debug("SAT: xpath result is a node."),n.singleNodeValue?(t.push(n.singleNodeValue),vmf.log.info("SAT: new element pushed on elements array.")):vmf.log.error("SAT: selector could not be found.");break;case XPathResult.ANY_TYPE:case XPathResult.NUMBER_TYPE:case XPathResult.STRING_TYPE:case XPathResult.BOOLEAN_TYPE:default:vmf.log.error("SAT: unsupported xpath result type: "+n.resultType)}return vmf.log.info("SAT: selector: elements found: "+t.length),t},fetchTemplate:function(options){var templateURL=vmf.sat.root+"/templates/"+options.template;vmf.log.info("SAT: loading template from: "+templateURL),$.getScriptCache(templateURL,function(script){void 0===vmf.sat.template&&eval(script);var data=vmf.sat.template;vmf.log.debug("SAT: alert template: "+data);var splitLayout=data.split("<!-- ALERT_WRAPPER -->"),alertWrapper=splitLayout[1],alertMessages=new Array;vmf.log.debug("SAT: number of alert messages found: "+options.alerts.length),$.each(options.alerts,function(){var e=alertWrapper;e=e.replace("<!-- ALERT_TITLE -->",this.title),e=e.replace("<!-- ALERT_DESCRIPTION -->",this.description),void 0!=this.link&&null!==this.link&&void 0!=this.link.title&&null!==this.link.title&&void 0!=this.link.href&&null!==this.link.href&&(e=e.replace("<!-- ALERT_LINK_TITLE -->",this.link.title),e=e.replace("<!-- ALERT_LINK_HREF -->",this.link.href)),alertMessages.push(e)}),splitLayout[1]=alertMessages.join(""),options.content=splitLayout.join(""),vmf.log.debug("SAT: alert content: "+options.content),vmf.sat.addAlert(options)})},loadTemplate:function(e){void 0!==e&&null!==e&&(vmf.sat.template=e)},addAlert:function(e){$.each(e.elements,function(){vmf.log.info("SAT: Adding the alerts to the DOM."),$.isFunction($()[e.position])?($(this)[e.position](e.content),$("div.alert-box").slideDown("fast"),vmf.sat.preview&&(vmf.log.info("SAT: showing preview mode banner."),$("div.alert-preview-container").slideDown("fast"))):vmf.log.error("SAT: "+e.position+"position is not valid.")})},enterPreview:function(){$("div.alert-box").slideUp("fast",function(){$(this).remove()}),$.cookie("sat","1",{path:"/",domain:".vmware.com"}),vmf.sat.fetchAlerts()},exitPreview:function(){confirm("Are you sure you want to stop previewing future alerts and view the current alerts?")&&($.cookie("sat",null,{path:"/",domain:".vmware.com"}),$("div.alert-preview-container, div.alert-box").remove(),vmf.sat.fetchAlerts())}}}(jQuery);